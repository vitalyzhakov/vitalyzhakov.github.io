+++
title = "Песочница (среда разработки) для веб-разработчиков"
date = 2018-05-07T00:10:06+05:00
draft = false

# Tags and categories
# For example, use `tags = []` for no tags, or the form `tags = ["A Tag", "Another Tag"]` for one or more tags.
tags = ["Среда разработки", "Docker"]

# Featured image
# Place your image in the `static/img/` folder and reference its filename below, e.g. `image = "example.jpg"`.
[header]
image = ""
caption = ""

+++

В системе контроля задач создаётся новый элемент с уникальным именем (порядковым номером).
В репозитории проекта создаётся ветка с этим именем в нижнем регистре.

Раработчик вносит изменения в код и выполняет `push` на удалённый сервер.
CI-сервер (gitlab) подхватывает это событие и создаёт задание для `worker` для песочниц.

## Конфигурация worker:

* много оперативной памяти (из расчёта количество задач в день, над которыми предстоит работать * количество контейнеров * количество потребляемой памяти на контейнер);
* 100 GB HDD;
* `docker`-демон;
* `docker-compose`;
* хостовой nginx для проксирования сайтов;
* хостовой [consul](https://consul.io) для разрешения имён контейнеров в IP-адреса;
* скрипты для ночного удаления контейнеров;
* скрипты для ежедневного удаления песочниц.

Worker создаётся таким с целью:
* выделения ресурсов по требованию (требование гибкости);
* возврата ресурсов в общий пул, когда они становятся не нужны (ресурсы стоят денег).