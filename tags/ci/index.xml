<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>CI on Инфраструктура ИТ</title>
    <link>https://vitalyzhakov.github.io/tags/ci/</link>
    <description>Recent content in CI on Инфраструктура ИТ</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>ru-ru</language>
    <copyright>&amp;copy; 2018</copyright>
    <lastBuildDate>Thu, 07 Jun 2018 00:00:00 +0000</lastBuildDate>
    
	<atom:link href="https://vitalyzhakov.github.io/tags/ci/index.xml" rel="self" type="application/rss+xml" />
    
    
    <item>
      <title>Прокидываем протокол клиента в исполняемый скрипт для веб-сервера</title>
      <link>https://vitalyzhakov.github.io/post/https-to-container/</link>
      <pubDate>Thu, 07 Jun 2018 00:00:00 +0000</pubDate>
      
      <guid>https://vitalyzhakov.github.io/post/https-to-container/</guid>
      <description>Иногда приложению нужно знать, по какому протоколу соединяется Клиент. Но при этом приложение скрыто за балансировщиком (SSL терминируется на балансировщике, апстримы работают по HTTP).
Суть в следующем - подменить параметр HTTPS информацией с балансировщика.
Тогда конфигруация балансировщика может быть
server { listen 80; rewrite ^(.*)$ https://$server_name$1 permanent; } server { listen 443; ssl on; ssl_certificate /etc/nginx/ssl/server.crt; ssl_certificate_key /etc/nginx/ssl/server.key; location / { proxy_pass http://upstream.addr; proxy_set_header X-Forwarded-Proto $https; proxy_set_header Host $host; } }  Конфигурация nginx на апстриме</description>
    </item>
    
  </channel>
</rss>